# 数据库分库分表方案设计与实现

## 描述
为一个大规模应用设计并实现数据库分库分表解决方案，解决数据量大和高并发访问的问题。

## 要求
1. 设计分库分表方案，包括：
   - 分片策略（水平分片、垂直分片或混合）
   - 分片键选择
   - 路由算法
   - 全局ID生成策略
2. 实现以下核心功能：
   - 数据路由中间件
   - 分布式事务处理
   - 跨分片查询处理
   - 数据迁移和再平衡工具
3. 处理以下挑战：
   - 跨分片JOIN操作
   - 分布式事务一致性
   - 数据热点问题
   - 容量规划和扩展
4. 提供性能测试和监控方案

## 输入
应用场景：
- 社交媒体平台的用户数据和内容存储
- 用户数量：1亿+
- 每日新增内容：1000万+
- 数据增长率：每月20%
- 高峰期QPS：10万+
- 主要表结构：用户表、关系表、内容表、互动表

## 期望输出
1. 分库分表架构设计文档
2. 分片策略和路由算法实现
3. 数据访问层代码
4. 分布式事务处理实现
5. 数据迁移和再平衡工具
6. 性能测试报告
7. 监控和运维方案

## 评估标准
1. 分片策略设计的合理性
2. 路由算法的效率和准确性
3. 跨分片操作的处理方案
4. 分布式事务的一致性保证
5. 扩展性和可维护性
6. 性能和资源利用效率
7. 数据迁移方案的可行性
8. 监控和故障处理能力