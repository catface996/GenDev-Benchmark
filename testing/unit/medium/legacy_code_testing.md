# 遗留代码测试策略

## 描述
学习如何为缺乏测试的遗留代码编写有效的单元测试，并逐步改进代码的可测试性。

## 要求
1. 理解遗留代码测试的挑战：
   - 缺乏文档和规范
   - 高度耦合和依赖
   - 全局状态和副作用
   - 复杂的控制流
   - 缺乏测试点
2. 实现以下遗留代码测试策略：
   - 特征测试（Characterization Testing）
   - 金丝雀测试（Canary Testing）
   - 接缝技术（Seams）
   - 突破点识别
   - 依赖破解
   - 提取和重构方法
3. 应用安全重构技术：
   - 识别变更点
   - 建立安全网
   - 小步重构
   - 保持行为不变
4. 逐步提高代码的可测试性：
   - 引入依赖注入
   - 提取接口
   - 分离关注点
   - 消除全局状态
5. 编写清晰的测试文档和注释

## 输入
一段缺乏测试的遗留代码，具有典型的可测试性问题。

## 期望输出
1. 遗留代码的单元测试
2. 安全重构的步骤和结果
3. 可测试性改进的分析和说明
4. 测试文档和注释
5. 遗留代码测试策略的说明和示例

## 评估标准
1. 测试策略的选择和实现
2. 重构的安全性和有效性
3. 可测试性的改进程度
4. 测试的完整性和有效性
5. 代码的可读性和可维护性
6. 测试文档的清晰度
7. 对遗留代码测试概念的理解